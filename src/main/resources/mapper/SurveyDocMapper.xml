<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zxyy.yusx.myddc.mapper.SurveyDocMapper">
    <resultMap id="BaseResultMap" type="com.zxyy.yusx.myddc.model.SurveyDoc">
        <id column="doc_id" jdbcType="VARCHAR" property="docId"/>
        <result column="doc_name" jdbcType="VARCHAR" property="docName"/>
        <result column="doc_discribe" jdbcType="VARCHAR" property="docDiscribe"/>
        <result column="doc_writer" jdbcType="VARCHAR" property="docWriter"/>
        <result column="doc_createtime" jdbcType="TIMESTAMP" property="docCreatetime"/>
        <result column="doc_status" jdbcType="INTEGER" property="docStatus"/>
        <result column="doc_extend1" jdbcType="VARCHAR" property="docExtend1"/>
        <result column="doc_extend2" jdbcType="VARCHAR" property="docExtend2"/>
        <result column="doc_extend3" jdbcType="VARCHAR" property="docExtend3"/>
        <result column="doc_extend4" jdbcType="VARCHAR" property="docExtend4"/>
        <result column="doc_extend5" jdbcType="VARCHAR" property="docExtend5"/>
    </resultMap>

    <select id="selectAllSurveyVo1" resultType="SurveyVo1">
        SELECT
        r1.deptCode,
        r1.deptName,
        r1.itemCode,
        r1.itemName,
        GROUP_CONCAT(r1.itemSatisfy) itemSatisfies,
        GROUP_CONCAT(r1.satisfyNum) satisfyNums
        FROM
        survey_report1 r1
        GROUP BY
        r1.deptCode,
        r1.itemCode
    </select>

    <select id="selectOneDeptSurvey" parameterType="java.lang.String" resultType="SurveyVo1">
        SELECT
        r1.deptCode,
        r1.deptName,
        r1.itemCode,
        r1.itemName,
        GROUP_CONCAT(r1.itemSatisfy) itemSatisfies,
        GROUP_CONCAT(r1.satisfyNum) satisfyNums
        FROM
        survey_report1 r1 where r1.deptCode=#{dept}
        GROUP BY
        r1.deptCode,
        r1.itemCode
    </select>
</mapper>